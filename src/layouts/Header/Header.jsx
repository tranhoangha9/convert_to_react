'use client';

import React, { useState } from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { useCart } from '../../context/CartContext';

function Header() {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const pathname = usePathname();
  const { items } = useCart();
  
  const cartItemCount = items.reduce((total, item) => total + item.quantity, 0);

  const toggleMobileMenu = () => {
    setIsMobileMenuOpen(!isMobileMenuOpen);
  };

  return (
    <header>
      <nav className="navbar">
        <div className="container">
          <Link href="/">
            <div className="logo">GREENMIND</div>
          </Link>
          <input type="checkbox" id="nav-toggle" className="nav-toggle" checked={isMobileMenuOpen} onChange={toggleMobileMenu} />
          <ul className={`nav-menu ${isMobileMenuOpen ? 'active' : ''}`}>
            <li><Link href="/" className={pathname === '/' ? 'active' : ''}>Home</Link></li>
            <li><Link href="/products" className={pathname === '/products' ? 'active' : ''}>Products</Link></li>
            <li><Link href="/contact" className={pathname === '/contact' ? 'active' : ''}>Contact</Link></li>
            <div className="mobile-nav-icons">
              <Link href="/cart" style={{ position: 'relative' }}>
                <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M0 1.25C0 1.05109 0.0790176 0.860322 0.21967 0.71967C0.360322 0.579018 0.551088 0.5 0.75 0.5H3C3.1673 0.500046 3.32977 0.556026 3.4616 0.659037C3.59342 0.762048 3.68701 0.906176 3.7275 1.0685L4.335 3.5H21.75C21.8601 3.5001 21.9689 3.52445 22.0685 3.57133C22.1682 3.6182 22.2563 3.68644 22.3266 3.77121C22.3969 3.85597 22.4477 3.95518 22.4753 4.06178C22.5029 4.16838 22.5068 4.27976 22.4865 4.388L20.2365 16.388C20.2043 16.5599 20.1131 16.7151 19.9786 16.8268C19.8442 16.9386 19.6749 16.9998 19.5 17H6C5.82515 16.9998 5.65585 16.9386 5.52137 16.8268C5.38688 16.7151 5.29567 16.5599 5.2635 16.388L3.015 4.4105L2.415 2H0.75C0.551088 2 0.360322 1.92098 0.21967 1.78033C0.0790176 1.63968 0 1.44891 0 1.25ZM4.653 5L6.6225 15.5H18.8775L20.847 5H4.653ZM7.5 17C6.70435 17 5.94129 17.3161 5.37868 17.8787C4.81607 18.4413 4.5 19.2044 4.5 20C4.5 20.7956 4.81607 21.5587 5.37868 22.1213C5.94129 22.6839 6.70435 23 7.5 23C8.29565 23 9.05871 22.6839 9.62132 22.1213C10.1839 21.5587 10.5 20.7956 10.5 20C10.5 19.2044 10.1839 18.4413 9.62132 17.8787C9.05871 17.3161 8.29565 17 7.5 17ZM18 17C17.2043 17 16.4413 17.3161 15.8787 17.8787C15.3161 18.4413 15 19.2044 15 20C15 20.7956 15.3161 21.5587 15.8787 22.1213C16.4413 22.6839 17.2043 23 18 23C18.7956 23 19.5587 22.6839 20.1213 22.1213C20.6839 21.5587 21 20.7956 21 20C21 19.2044 20.6839 18.4413 20.1213 17.8787C19.5587 17.3161 18.7956 17 18 17ZM7.5 18.5C7.89782 18.5 8.27936 18.658 8.56066 18.9393C8.84196 19.2206 9 19.6022 9 20C9 20.3978 8.84196 20.7794 8.56066 21.0607C8.27936 21.342 7.89782 21.5 7.5 21.5C7.10217 21.5 6.72064 21.342 6.43934 21.0607C6.15804 20.7794 6 20.3978 6 20C6 19.6022 6.15804 19.2206 6.43934 18.9393C6.72064 18.658 7.10217 18.5 7.5 18.5ZM18 18.5C18.3978 18.5 18.7794 18.658 19.0607 18.9393C19.342 19.2206 19.5 19.6022 19.5 20C19.5 20.3978 19.342 20.7794 19.0607 21.0607C18.7794 21.342 18.3978 21.5 18 21.5C17.6022 21.5 17.2206 21.342 16.9393 21.0607C16.658 20.7794 16.5 20.3978 16.5 20C16.5 19.6022 16.658 19.2206 16.9393 18.9393C17.2206 18.658 17.6022 18.5 18 18.5Z" fill="#1E1E1E" />
                </svg>
                {cartItemCount > 0 && (
                  <span style={{
                    position: 'absolute',
                    top: '-8px',
                    right: '-8px',
                    backgroundColor: 'red',
                    color: 'white',
                    borderRadius: '50%',
                    width: '20px',
                    height: '20px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontSize: '12px',
                    fontWeight: 'bold'
                  }}>
                    {cartItemCount}
                  </span>
                )}
              </Link>
              <span>
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 9C10.1935 9 11.3381 8.52589 12.182 7.68198C13.0259 6.83807 13.5 5.69347 13.5 4.5C13.5 3.30653 13.0259 2.16193 12.182 1.31802C11.3381 0.474106 10.1935 0 9 0C7.80653 0 6.66193 0.474106 5.81802 1.31802C4.97411 2.16193 4.5 3.30653 4.5 4.5C4.5 5.69347 4.97411 6.83807 5.81802 7.68198C6.66193 8.52589 7.80653 9 9 9ZM12 4.5C12 5.29565 11.6839 6.05871 11.1213 6.62132C10.5587 7.18393 9.79565 7.5 9 7.5C8.20435 7.5 7.44129 7.18393 6.87868 6.62132C6.31607 6.05871 6 5.29565 6 4.5C6 3.70435 6.31607 2.94129 6.87868 2.37868C7.44129 1.81607 8.20435 1.5 9 1.5C9.79565 1.5 10.5587 1.81607 11.1213 2.37868C11.6839 2.94129 12 3.70435 12 4.5ZM18 16.5C18 18 16.5 18 16.5 18H1.5C1.5 18 0 18 0 16.5C0 15 1.5 10.5 9 10.5C16.5 10.5 18 15 18 16.5ZM16.5 16.494C16.4985 16.125 16.269 15.015 15.252 13.998C14.274 13.02 12.4335 12 9 12C5.565 12 3.726 13.02 2.748 13.998C1.731 15.015 1.503 16.125 1.5 16.494H16.5Z" fill="#1E1E1E" />
                </svg>
              </span>
            </div>
          </ul>
          <div className="nav-icons text-end">
            <Link href="/cart" style={{ position: 'relative' }}>
              <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 1.25C0 1.05109 0.0790176 0.860322 0.21967 0.71967C0.360322 0.579018 0.551088 0.5 0.75 0.5H3C3.1673 0.500046 3.32977 0.556026 3.4616 0.659037C3.59342 0.762048 3.68701 0.906176 3.7275 1.0685L4.335 3.5H21.75C21.8601 3.5001 21.9689 3.52445 22.0685 3.57133C22.1682 3.6182 22.2563 3.68644 22.3266 3.77121C22.3969 3.85597 22.4477 3.95518 22.4753 4.06178C22.5029 4.16838 22.5068 4.27976 22.4865 4.388L20.2365 16.388C20.2043 16.5599 20.1131 16.7151 19.9786 16.8268C19.8442 16.9386 19.6749 16.9998 19.5 17H6C5.82515 16.9998 5.65585 16.9386 5.52137 16.8268C5.38688 16.7151 5.29567 16.5599 5.2635 16.388L3.015 4.4105L2.415 2H0.75C0.551088 2 0.360322 1.92098 0.21967 1.78033C0.0790176 1.63968 0 1.44891 0 1.25ZM4.653 5L6.6225 15.5H18.8775L20.847 5H4.653ZM7.5 17C6.70435 17 5.94129 17.3161 5.37868 17.8787C4.81607 18.4413 4.5 19.2044 4.5 20C4.5 20.7956 4.81607 21.5587 5.37868 22.1213C5.94129 22.6839 6.70435 23 7.5 23C8.29565 23 9.05871 22.6839 9.62132 22.1213C10.1839 21.5587 10.5 20.7956 10.5 20C10.5 19.2044 10.1839 18.4413 9.62132 17.8787C9.05871 17.3161 8.29565 17 7.5 17ZM18 17C17.2043 17 16.4413 17.3161 15.8787 17.8787C15.3161 18.4413 15 19.2044 15 20C15 20.7956 15.3161 21.5587 15.8787 22.1213C16.4413 22.6839 17.2043 23 18 23C18.7956 23 19.5587 22.6839 20.1213 22.1213C20.6839 21.5587 21 20.7956 21 20C21 19.2044 20.6839 18.4413 20.1213 17.8787C19.5587 17.3161 18.7956 17 18 17ZM7.5 18.5C7.89782 18.5 8.27936 18.658 8.56066 18.9393C8.84196 19.2206 9 19.6022 9 20C9 20.3978 8.84196 20.7794 8.56066 21.0607C8.27936 21.342 7.89782 21.5 7.5 21.5C7.10217 21.5 6.72064 21.342 6.43934 21.0607C6.15804 20.7794 6 20.3978 6 20C6 19.6022 6.15804 19.2206 6.43934 18.9393C6.72064 18.658 7.10217 18.5 7.5 18.5ZM18 18.5C18.3978 18.5 18.7794 18.658 19.0607 18.9393C19.342 19.2206 19.5 19.6022 19.5 20C19.5 20.3978 19.342 20.7794 19.0607 21.0607C18.7794 21.342 18.3978 21.5 18 21.5C17.6022 21.5 17.2206 21.342 16.9393 21.0607C16.658 20.7794 16.5 20.3978 16.5 20C16.5 19.6022 16.658 19.2206 16.9393 18.9393C17.2206 18.658 17.6022 18.5 18 18.5Z" fill="#1E1E1E" />
              </svg>
              {cartItemCount > 0 && (
                <span style={{
                  position: 'absolute',
                  top: '-8px',
                  right: '-8px',
                  backgroundColor: 'red',
                  color: 'white',
                  borderRadius: '50%',
                  width: '20px',
                  height: '20px',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  fontSize: '12px',
                  fontWeight: 'bold'
                }}>
                  {cartItemCount}
                </span>
              )}
            </Link>
            <span>
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 9C10.1935 9 11.3381 8.52589 12.182 7.68198C13.0259 6.83807 13.5 5.69347 13.5 4.5C13.5 3.30653 13.0259 2.16193 12.182 1.31802C11.3381 0.474106 10.1935 0 9 0C7.80653 0 6.66193 0.474106 5.81802 1.31802C4.97411 2.16193 4.5 3.30653 4.5 4.5C4.5 5.69347 4.97411 6.83807 5.81802 7.68198C6.66193 8.52589 7.80653 9 9 9ZM12 4.5C12 5.29565 11.6839 6.05871 11.1213 6.62132C10.5587 7.18393 9.79565 7.5 9 7.5C8.20435 7.5 7.44129 7.18393 6.87868 6.62132C6.31607 6.05871 6 5.29565 6 4.5C6 3.70435 6.31607 2.94129 6.87868 2.37868C7.44129 1.81607 8.20435 1.5 9 1.5C9.79565 1.5 10.5587 1.81607 11.1213 2.37868C11.6839 2.94129 12 3.70435 12 4.5ZM18 16.5C18 18 16.5 18 16.5 18H1.5C1.5 18 0 18 0 16.5C0 15 1.5 10.5 9 10.5C16.5 10.5 18 15 18 16.5ZM16.5 16.494C16.4985 16.125 16.269 15.015 15.252 13.998C14.274 13.02 12.4335 12 9 12C5.565 12 3.726 13.02 2.748 13.998C1.731 15.015 1.503 16.125 1.5 16.494H16.5Z" fill="#1E1E1E" />
              </svg>
            </span>
            <label htmlFor="nav-toggle" className="mobile-menu-toggle">
              <svg width="21" height="11" viewBox="0 0 21 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 1H20M1 5.5H20M1 10H20" stroke="#1E1E1E" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
              </svg>
            </label>
          </div>
        </div>
      </nav>
    </header>
  );
}

export default Header;

